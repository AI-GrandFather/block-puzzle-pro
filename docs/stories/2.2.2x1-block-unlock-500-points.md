# Story 2.2: 2x1 Block Unlock at 500 Points

## Status
Draft

## Story
**As a** player,
**I want** to unlock the 2x1 block when I reach 500 points,
**so that** I experience meaningful progression and new strategic options.

## Acceptance Criteria
1. 2x1 rectangular block unlocks automatically at exactly 500 points milestone
2. Visual celebration animation announces the new block unlock
3. 2x1 block appears in bottom tray alongside existing L-shape, 1x1, and 1x2 blocks
4. Block unlock persists across game sessions - once unlocked, always available
5. Clear visual indication shows which blocks are unlocked vs locked
6. Achievement milestone (500 points) displays as accomplished in player progress

## Tasks / Subtasks
- [ ] Task 1: Milestone Detection (AC: 1)
  - [ ] Implement 500-point milestone detection in ScoreTracker
  - [ ] Trigger unlock event exactly at 500 points
  - [ ] Ensure milestone only triggers once per session
- [ ] Task 2: Block Unlock Animation (AC: 2)
  - [ ] Create celebration animation for new block unlock
  - [ ] Design visual effects for milestone achievement
  - [ ] Implement satisfying unlock notification
- [ ] Task 3: Block Integration (AC: 3)
  - [ ] Add 2x1 block type to BlockFactory
  - [ ] Update block tray to show 4 blocks when unlocked
  - [ ] Implement 2x1 block placement mechanics
- [ ] Task 4: Persistence (AC: 4, 5)
  - [ ] Save unlock state to SwiftData
  - [ ] Restore unlock state on app launch
  - [ ] Show visual indicators for unlocked blocks
- [ ] Task 5: Progress Display (AC: 6)
  - [ ] Show 500-point milestone as achieved
  - [ ] Update progress indicators
  - [ ] Display unlock status in player progression

## Dev Notes

### Architecture Context
Implements progressive block unlocks through BlockFactory and milestone system integration.

**Component Integration:**
- ScoreTracker: Milestone detection and achievement tracking [Source: architecture/components.md#scoretracker-component]
- BlockFactory: Block type management based on progression [Source: architecture/components.md#blockfactory-component]
- Progressive disclosure UI paradigm [Source: prd/user-interface-design-goals.md#key-interaction-paradigms]

### File Locations
- Milestone Manager: `BlockPuzzlePro/Progression/MilestoneManager.swift`
- Block Unlock: `BlockPuzzlePro/Game/BlockUnlock.swift`
- Unlock Animation: `BlockPuzzlePro/Animation/UnlockAnimator.swift`

### Block Type Addition
```swift
enum BlockType: CaseIterable {
    case single     // 1x1 - Always available
    case horizontal // 1x2 - Always available  
    case lShape     // L-shape - Always available
    case vertical   // 2x1 - Unlocks at 500 points
}
```

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-15 | 1.0 | Initial story creation | Bob (SM) |