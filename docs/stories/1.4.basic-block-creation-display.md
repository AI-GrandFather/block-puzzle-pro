# Story 1.4: Basic Block Creation and Display

## Status
Draft

## Story
**As a** player,
**I want** to see the three starting block types (L-shape, 1x1, 1x2) in the bottom tray,
**so that** I can begin placing blocks on the grid.

## Acceptance Criteria
1. Three block types (L-shape, 1x1, 1x2) display in bottom interface tray
2. Blocks use vibrant, distinct colors that are easily distinguishable
3. Block shapes render with clean geometric design matching overall aesthetic
4. Bottom tray layout provides adequate spacing for comfortable touch interaction
5. Blocks automatically regenerate in tray after placement (infinite supply)

## Tasks / Subtasks
- [ ] Task 1: Block Type Definitions (AC: 1)
  - [ ] Define L-shape block pattern and rotations
  - [ ] Define 1x1 single block pattern
  - [ ] Define 1x2 rectangular block pattern
  - [ ] Create block type enumeration system
  - [ ] Implement block pattern data structures
- [ ] Task 2: Block Color System (AC: 2)
  - [ ] Implement vibrant color palette for blocks
  - [ ] Assign distinct colors to each block type
  - [ ] Ensure colors meet accessibility contrast requirements
  - [ ] Test color distinguishability across device types
  - [ ] Add colorblind-friendly patterns/textures
- [ ] Task 3: Block Rendering (AC: 3)
  - [ ] Create SpriteKit nodes for block visualization
  - [ ] Apply clean geometric design styling
  - [ ] Implement consistent block cell sizing
  - [ ] Add subtle shadows/borders for depth
  - [ ] Ensure rendering matches overall aesthetic
- [ ] Task 4: Bottom Tray Layout (AC: 4)
  - [ ] Design bottom tray container layout
  - [ ] Position three block slots with adequate spacing
  - [ ] Ensure touch targets meet minimum size requirements (44pt)
  - [ ] Test layout on different screen sizes
  - [ ] Implement responsive spacing for various devices
- [ ] Task 5: Block Regeneration System (AC: 5)
  - [ ] Implement automatic block regeneration after placement
  - [ ] Create block factory system for infinite supply
  - [ ] Ensure smooth transitions during regeneration
  - [ ] Handle regeneration timing to prevent gaps
  - [ ] Test regeneration across different gameplay speeds

## Dev Notes

### Architecture Context
This story implements the BlockFactory component and integrates with the GameView for block display.

**Component Integration:**
- BlockFactory Component: Generate and manage available block types [Source: architecture/components.md#blockfactory-component]
- GameView Component: SwiftUI interface for block display [Source: architecture/components.md#gameview-component]
- Swift 6.1 Actor with in-memory caching [Source: architecture/components.md#technology-stack]

**Visual Design Requirements:**
- Vibrant block colors (blues, greens, oranges, purples) against neutral backgrounds [Source: prd/user-interface-design-goals.md#branding]
- Clean geometric design with satisfying visual fit [Source: prd/user-interface-design-goals.md#branding]
- Bottom tray as part of core game board screen [Source: prd/user-interface-design-goals.md#core-screens-and-views]

**Block Type Specifications:**
- Starting blocks: L-shape, 1x1, 1x2 as defined in requirements [Source: prd/requirements.md#functional-requirements]
- Infinite supply system for continuous gameplay [Source: prd/epic-1-foundation-core-gameplay-infrastructure.md#acceptance-criteria]

### File Locations
- Block Factory: `BlockPuzzlePro/Game/BlockFactory.swift`
- Block Types: `BlockPuzzlePro/Models/BlockType.swift`
- Block View: `BlockPuzzlePro/Views/BlockView.swift`
- Tray View: `BlockPuzzlePro/Views/BlockTrayView.swift`
- Color System: `BlockPuzzlePro/Design/ColorSystem.swift`

### Block Implementation Details
**Block Type Definitions:**
```swift
enum BlockType: CaseIterable {
    case single     // 1x1
    case horizontal // 1x2
    case lShape     // L-shape
}

struct BlockPattern {
    let cells: [[Bool]]
    let color: BlockColor
    let size: CGSize
}
```

**Color Palette:**
- L-Shape: Orange (#FF6B35) - Most complex, warm attention color
- 1x1: Blue (#4A90E2) - Simple, cool and reliable
- 1x2: Green (#7ED321) - Medium complexity, fresh growth color
- Colors chosen for maximum distinguishability and visual appeal

**Bottom Tray Layout:**
- Tray height: 15% of screen height (consistent with layout spec)
- Three equally spaced slots with 20pt minimum spacing
- Touch targets: Minimum 44x44pt (iOS accessibility guidelines)
- Background: Slightly darker than main background for definition

### BlockFactory Integration
```swift
actor BlockFactory {
    func generateNextBlocks() -> [BlockType] {
        // Return array of three starting block types
        return [.lShape, .single, .horizontal]
    }
    
    func getAvailableBlocks() -> [BlockType] {
        // For this story, always return the three starting types
        return [.lShape, .single, .horizontal]
    }
}
```

### Performance Considerations
- Use SpriteKit node pooling for block rendering
- Cache block patterns to avoid recreation
- Implement efficient color application system
- Ensure 60fps during block regeneration animations

### Accessibility Requirements
- Block colors must work with high contrast mode
- Pattern/texture alternatives for colorblind users [Source: prd/user-interface-design-goals.md#accessibility]
- VoiceOver descriptions for each block type
- Touch targets meet iOS accessibility guidelines (44pt minimum)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-15 | 1.0 | Initial story creation | Bob (SM) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*Results from QA Agent review will be populated here after implementation*