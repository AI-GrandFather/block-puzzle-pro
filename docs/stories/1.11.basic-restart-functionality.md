# Story 1.11: Basic Restart Functionality

## Status
Done

## Story
**As a** player,
**I want** to restart the game after game over,
**so that** I can play multiple rounds.

## Acceptance Criteria
1. Simple restart button appears on game over screen
2. Restart clears grid completely and resets score to zero
3. New set of three blocks appears in tray after restart
4. Restart functionality works immediately without app restart
5. All game state properly resets for fresh session

## Tasks / Subtasks
- [x] Task 1: Restart UI (AC: 1)
  - [x] Added "Play Again" CTA to game-over overlay
  - [x] Surfaced restart action within the settings sheet for cleaner header UI
- [x] Task 2: State Reset Logic (AC: 2, 3, 5)
  - [x] Reset grid, score, line highlights, and drag state through a centralized restart helper
  - [x] Regenerated block tray via `BlockFactory.resetTray()` on each restart
  - [x] Cleared game-over flag and preview nodes before resuming play
- [x] Task 3: Immediate Restart (AC: 4)
  - [x] Triggered restart with haptic confirmation and no app reload
  - [x] Re-evaluated move availability right after reset to resume gameplay instantly

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-01-15 | 1.0 | Initial story creation | Bob (SM) |
| 2025-09-23 | 1.1 | Centralized restart workflow and exposed actions via settings + overlay | Dev Agent (ChatGPT) |

## Dev Agent Record
| Date | Agent | Notes |
|------|-------|-------|
| 2025-09-23 | Dev Agent (ChatGPT) | Implemented a shared `performRestart` pipeline that resets engine, tray, and drag controller while collapsing the restart CTA into the settings gear and game-over overlay. |
